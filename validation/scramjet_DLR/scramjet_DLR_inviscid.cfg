%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                              %
% SU2 configuration file                                                       %
% Case description: Mach 5 inviscid flow over a 10deg wedge                    %
% Author: C. Garbacz                                                           %
% Institution: Strathclyde University                                          %
% Date: 2020.11.01                                                             %
% File Version 7.4.0 "Blackbird"                                               %
%                                                                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ------------- DIRECT, ADJOINT, AND LINEARIZED PROBLEM DEFINITION ------------%
%
% Physical governing equations (EULER, NAVIER_STOKES,
%                               WAVE_EQUATION, HEAT_EQUATION, FEM_ELASTICITY,
%                               POISSON_EQUATION)
SOLVER= NEMO_EULER
%
GAS_MODEL= H2_CERFACS
%
GAS_COMPOSITION= (0, 0, 0, 0, 0, 0, 0, 0.21, 0.79)
%INLET_GAS_COMPOSITION= (0.1, 0, 0, 0, 0, 0, 0, 0.15, 0.75)
INLET_GAS_COMPOSITION= (1.0, 0, 0, 0, 0, 0, 0, 0.0, 0.0)
%INLET_GAS_COMPOSITION= (1.0, 0, 0, 0, 0, 0, 0, 0.0, 0.0)
% nonreacting flow 
FROZEN_MIXTURE= YES
%
MATH_PROBLEM= DIRECT
%
% Restart solution (NO, YES)
RESTART_SOL= YES

% ----------- COMPRESSIBLE AND INCOMPRESSIBLE FREE-STREAM DEFINITION ----------%
%
MACH_NUMBER= 2
%
FREESTREAM_PRESSURE= 100000.0
FREESTREAM_TEMPERATURE= 340.0
FREESTREAM_TEMPERATURE_VE= 340.0

% ---- NONEQUILIBRIUM GAS, IDEAL GAS, POLYTROPIC, VAN DER WAALS AND PENG ROBINSON CONSTANTS -------%
%
FLUID_MODEL= MUTATIONPP

% -------------------- BOUNDARY CONDITION DEFINITION --------------------------%
%
% Euler wall boundary marker(s) (NONE = no marker)
MARKER_EULER= ( wall_top,wall_bottom, wedge_top,wedge_bottom,wedge_rear)
MARKER_SUPERSONIC_OUTLET= ( outlet )
MARKER_FAR = ( inlet_top,inlet_bottom )
% hydrogen inlet
%MARKER_SUPERSONIC_INLET=(inlet_fuel, 300.0, 100000, 1200, 0, 0)
MARKER_SUPERSONIC_INLET=(inlet_fuel, 300.0, 100000, 2400, 0, 0)
%
MARKER_PLOTTING= (NONE )
MARKER_MONITORING= ( wedge_top )

% ------------- COMMON PARAMETERS DEFINING THE NUMERICAL METHOD ---------------%
%
% Numerical method for spatial gradients (GREEN_GAUSS, LEAST_SQUARES, 
%                                         WEIGHTED_LEAST_SQUARES)
NUM_METHOD_GRAD= WEIGHTED_LEAST_SQUARES
NUM_METHOD_GRAD_RECON= LEAST_SQUARES
%
% Courant-Friedrichs-Lewy condition of the finest grid
%CFL_NUMBER= 0.1
CFL_NUMBER= 0.15
%
% Number of total iterations
ITER= 100000
%
% Linear solver for the implicit formulation (BCGSTAB, FGMRES)
LINEAR_SOLVER= FGMRES
%
% Min error of the linear solver for the implicit formulation
LINEAR_SOLVER_ERROR= 1.0e-5
LINEAR_SOLVER_ITER=10
LINEAR_SOLVER_PREC= ILU

%USE_ACCURATE_FLUX_JACOBIANS= YES

NEWTON_KRYLOV= YES
NEWTON_KRYLOV_IPARAM= (10, 3, 1) % n0, np, ft
NEWTON_KRYLOV_DPARAM= (1.0, 0.1, -3.0, 1e-6) % r0, tp, rf, e

% -----------------------------------------------------------------------%
%
% Convective numerical method (JST, LAX-FRIEDRICH, CUSP, ROE, AUSM, HLLC,
%                              TURKEL_PREC, MSW)
CONV_NUM_METHOD_FLOW= AUSM
%
% Spatial numerical order integration (1ST_ORDER, 2ND_ORDER, 2ND_ORDER_LIMITER)
%
MUSCL_FLOW= NO 
%
% Slope limiter (VENKATAKRISHNAN, MINMOD)
SLOPE_LIMITER_FLOW= VENKATAKRISHNAN
%SLOPE_LIMITER_FLOW= NONE
%
% Coefficient for the limiter (smooth regions)
VENKAT_LIMITER_COEFF= 0.01


%
% Time discretization (RUNGE-KUTTA_EXPLICIT, EULER_IMPLICIT, EULER_EXPLICIT)
TIME_DISCRE_FLOW= EULER_EXPLICIT
%TIME_DISCRE_FLOW= RUNGE-KUTTA_EXPLICIT

% --------------------------- CONVERGENCE PARAMETERS --------------------------%
%
% Min value of the residual (log10 of the residual)
CONV_RESIDUAL_MINVAL= -10
CONV_FIELD= RMS_MOMENTUM_X
%
% Start convergence criteria at iteration number
CONV_STARTITER= 10
%
% Number of elements to apply the criteria
CONV_CAUCHY_ELEMS= 100
%
% Epsilon to control the series convergence
CONV_CAUCHY_EPS= 1E-10

% ------------------------- INPUT/OUTPUT INFORMATION --------------------------%
%
% Mesh input file
MESH_FILENAME= scramjet_DLR_medium.su2
%
% Mesh input file format (SU2, CGNS, NETCDF_ASCII)
MESH_FORMAT= SU2
%
% Restart flow input file
SOLUTION_FILENAME= solution_flow.dat  
READ_BINARY_RESTART= YES
%
TABULAR_FORMAT= CSV
%
% Output file convergence history (w/o extension) 
CONV_FILENAME= history
%
% Output file restart flow
RESTART_FILENAME= restart_flow.dat
%
% Output file flow (w/o extension) variables
VOLUME_FILENAME= flow
%
% Output file surface flow coefficient (w/o extension)
SURFACE_FILENAME= surf     
%

OUTPUT_WRT_FREQ= 100
SCREEN_OUTPUT= (INNER_ITER, WALL_TIME, RMS_DENSITY, RMS_MOMENTUM-X, RMS_MOMENTUM-Y, RMS_ENERGY, RMS_SPECIES, LINSOL_ITER, LINSOL_RESIDUAL, LINSOL_ITER_SPECIES, LIFT,DRAG)
VOLUME_OUTPUT= (RESIDUAL, SOLUTION, PRIMITIVE)
OUTPUT_FILES= (RESTART, PARAVIEW, PARAVIEW_MULTIBLOCK)

